2025-03-21 22:59:24,723 - INFO - __main__ - Environment variables loaded:
2025-03-21 22:59:24,723 - INFO - __main__ - SLACK_BOT_TOKEN present: True
2025-03-21 22:59:24,723 - INFO - __main__ - SLACK_APP_TOKEN present: True
2025-03-21 22:59:24,723 - INFO - __main__ - SLACK_SIGNING_SECRET present: True
2025-03-21 22:59:24,729 - DEBUG - slack_bolt.App - Sending a request - url: https://slack.com/api/auth.test, query_params: {}, body_params: {}, files: {}, json_body: None, headers: {'Content-Type': 'application/x-www-form-urlencoded', 'Authorization': '(redacted)', 'User-Agent': 'Bolt/1.18.0 Python/3.13.2 slackclient/3.35.0 Darwin/24.3.0'}
2025-03-21 22:59:25,148 - DEBUG - slack_bolt.App - Received the following response - status: 200, headers: {'date': 'Sat, 22 Mar 2025 05:59:25 GMT', 'server': 'Apache', 'vary': 'Accept-Encoding', 'x-slack-req-id': 'ab60aa88cb0f269fb6eaff4e25d27075', 'x-content-type-options': 'nosniff', 'x-xss-protection': '0', 'pragma': 'no-cache', 'cache-control': 'private, no-cache, no-store, must-revalidate', 'expires': 'Sat, 26 Jul 1997 05:00:00 GMT', 'content-type': 'application/json; charset=utf-8', 'x-oauth-scopes': 'chat:write,commands,users:read,channels:read', 'access-control-expose-headers': 'x-slack-req-id, retry-after', 'access-control-allow-headers': 'slack-route, x-slack-version-ts, x-b3-traceid, x-b3-spanid, x-b3-parentspanid, x-b3-sampled, x-b3-flags', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'referrer-policy': 'no-referrer', 'x-slack-unique-id': 'Z95RvcBkCzAIr5jym5pIOgAAACI', 'x-slack-backend': 'r', 'access-control-allow-origin': '*', 'content-length': '187', 'via': '1.1 slack-prod.tinyspeck.com, envoy-www-iad-jpzsxhig,envoy-edge-iad-yjkafbfx', 'x-envoy-attempt-count': '1', 'x-envoy-upstream-service-time': '14', 'x-backend': 'main_normal main_canary_with_overflow main_control_with_overflow', 'x-server': 'slack-www-hhvm-main-iad-bhaa', 'x-slack-shared-secret-outcome': 'no-match', 'x-edge-backend': 'envoy-www', 'x-geoname-id': 'notfound', 'x-slack-edge-shared-secret-outcome': 'no-match', 'connection': 'close'}, body: {"ok":true,"url":"https:\/\/plus8soft.slack.com\/","team":"Plus8soft","user":"hloppy","team_id":"T078Q6V7GQ2","user_id":"U08JY70L9FV","bot_id":"B08JY70KNQK","is_enterprise_install":false}
2025-03-21 22:59:25,150 - INFO - __main__ - Scheduler thread started
2025-03-21 22:59:25,150 - INFO - __main__ - Starting Socket Mode handler...
2025-03-21 22:59:25,150 - INFO - __main__ - Using app token starting with: xapp-1-A08KGLV5JP2-8...
2025-03-21 22:59:25,150 - INFO - __main__ - Handler created successfully
2025-03-21 22:59:25,150 - INFO - __main__ - Attempting to start handler...
2025-03-21 22:59:25,150 - DEBUG - slack_bolt.App - Sending a request - url: https://slack.com/api/apps.connections.open, query_params: {}, body_params: {}, files: {}, json_body: None, headers: {'Content-Type': 'application/x-www-form-urlencoded', 'Authorization': '(redacted)', 'User-Agent': 'Bolt/1.18.0 Python/3.13.2 slackclient/3.35.0 Darwin/24.3.0'}
2025-03-21 22:59:25,563 - DEBUG - slack_bolt.App - Received the following response - status: 200, headers: {'date': 'Sat, 22 Mar 2025 05:59:25 GMT', 'server': 'Apache', 'vary': 'Accept-Encoding', 'x-slack-req-id': '255001011769a9094369a62cb2f5005e', 'x-content-type-options': 'nosniff', 'x-xss-protection': '0', 'x-robots-tag': 'noindex,nofollow', 'pragma': 'no-cache', 'cache-control': 'private, no-cache, no-store, must-revalidate', 'expires': 'Sat, 26 Jul 1997 05:00:00 GMT', 'content-type': 'application/json; charset=utf-8', 'x-accepted-oauth-scopes': 'connections:write', 'x-oauth-scopes': 'connections:write', 'access-control-expose-headers': 'x-slack-req-id, retry-after', 'access-control-allow-headers': 'slack-route, x-slack-version-ts, x-b3-traceid, x-b3-spanid, x-b3-parentspanid, x-b3-sampled, x-b3-flags', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'referrer-policy': 'no-referrer', 'x-slack-unique-id': 'Z95RvRkzsezoDZCSG3eHagAAMCY', 'x-slack-backend': 'r', 'access-control-allow-origin': '*', 'content-length': '173', 'via': '1.1 slack-prod.tinyspeck.com, envoy-www-iad-dkenuujr,envoy-edge-iad-ywtarkwc', 'x-envoy-attempt-count': '1', 'x-envoy-upstream-service-time': '11', 'x-backend': 'main_normal main_canary_with_overflow main_control_with_overflow', 'x-server': 'slack-www-hhvm-main-iad-qvux', 'x-slack-shared-secret-outcome': 'no-match', 'x-edge-backend': 'envoy-www', 'x-geoname-id': 'notfound', 'x-slack-edge-shared-secret-outcome': 'no-match', 'connection': 'close'}, body: {"ok":true,"url":"wss:\/\/wss-primary.slack.com\/link\/?ticket=7c96d1e9-d053-49f9-b619-d7cf47901fc8&app_id=c0b48ec6fca5c589364a575fb9dad3b93bbc8ae3b915396fcb9a658fd5ea2e55"}
2025-03-21 22:59:26,273 - INFO - slack_bolt.App - A new session has been established (session id: 59a6a982-fb09-4001-9ffb-6afe3d77bc7f)
2025-03-21 22:59:26,273 - INFO - slack_bolt.App - ⚡️ Bolt app is running!
2025-03-21 22:59:26,293 - INFO - slack_bolt.App - Starting to receive messages from a new connection (session id: 59a6a982-fb09-4001-9ffb-6afe3d77bc7f)
2025-03-21 22:59:26,294 - DEBUG - slack_bolt.App - on_message invoked: (message: {"type":"hello","num_connections":1,"debug_info":{"host":"applink-8","build_number":105,"approximate_connection_time":18060},"connection_info":{"app_id":"A08KGLV5JP2"}})
2025-03-21 22:59:26,294 - DEBUG - slack_bolt.App - A new message enqueued (current queue size: 1)
2025-03-21 22:59:26,294 - DEBUG - slack_bolt.App - A message dequeued (current queue size: 0)
2025-03-21 22:59:26,294 - DEBUG - slack_bolt.App - Message processing started (type: hello, envelope_id: None)
2025-03-21 22:59:26,295 - DEBUG - slack_bolt.App - Message processing completed (type: hello, envelope_id: None)
2025-03-21 22:59:51,127 - DEBUG - slack_bolt.App - on_message invoked: (message: {"envelope_id":"6f5873b5-788d-467f-ab43-d5f9f5ce6758","payload":{"token":"OCYvnpsBAlFBFnFJO3I1mfF5","team_id":"T078Q6V7GQ2","team_domain":"plus8soft","channel_id":"C07AN8HK2N8","channel_name":"big3","user_id":"U078M9TTM1B","user_name":"evgeniy","command":"\/hloppy","text":"@timur \u043e\u0433\u043e\u043d\u044c","api_app_id":"A08KGLV5JP2","is_enterprise_install":"false","response_url":"https:\/\/hooks.slack.com\/commands\/T078Q6V7GQ2\/8644331693042\/lmaxIoPOjZslgFdkV9CUlPtF","trigger_id":"8644331693106.7296233254818.e6f2f35993619f3e1440b15de14a1f07"},"type":"slash_commands","accepts_response_payload":true})
2025-03-21 22:59:51,127 - DEBUG - slack_bolt.App - A new message enqueued (current queue size: 1)
2025-03-21 22:59:51,128 - DEBUG - slack_bolt.App - A message dequeued (current queue size: 0)
2025-03-21 22:59:51,128 - DEBUG - slack_bolt.App - Message processing started (type: slash_commands, envelope_id: 6f5873b5-788d-467f-ab43-d5f9f5ce6758)
2025-03-21 22:59:51,128 - DEBUG - slack_bolt.App - Applying slack_bolt.middleware.ssl_check.ssl_check.SslCheck
2025-03-21 22:59:51,128 - DEBUG - slack_bolt.App - Applying slack_bolt.middleware.request_verification.request_verification.RequestVerification
2025-03-21 22:59:51,128 - DEBUG - slack_bolt.App - Applying slack_bolt.middleware.authorization.single_team_authorization.SingleTeamAuthorization
2025-03-21 22:59:51,128 - DEBUG - slack_bolt.App - Applying slack_bolt.middleware.ignoring_self_events.ignoring_self_events.IgnoringSelfEvents
2025-03-21 22:59:51,128 - DEBUG - slack_bolt.App - Applying slack_bolt.middleware.url_verification.url_verification.UrlVerification
2025-03-21 22:59:51,128 - DEBUG - slack_bolt.App - Applying CustomMiddleware(func=log_request)
2025-03-21 22:59:51,128 - DEBUG - hloppy_bot.py:log_request - Incoming request: {'token': 'OCYvnpsBAlFBFnFJO3I1mfF5', 'team_id': 'T078Q6V7GQ2', 'team_domain': 'plus8soft', 'channel_id': 'C07AN8HK2N8', 'channel_name': 'big3', 'user_id': 'U078M9TTM1B', 'user_name': 'evgeniy', 'command': '/hloppy', 'text': '@timur огонь', 'api_app_id': 'A08KGLV5JP2', 'is_enterprise_install': 'false', 'response_url': 'https://hooks.slack.com/commands/T078Q6V7GQ2/8644331693042/lmaxIoPOjZslgFdkV9CUlPtF', 'trigger_id': '8644331693106.7296233254818.e6f2f35993619f3e1440b15de14a1f07'}
2025-03-21 22:59:51,129 - DEBUG - slack_bolt.App - Checking listener: handle_hloppy_command ...
2025-03-21 22:59:51,129 - DEBUG - slack_bolt.App - Running listener: handle_hloppy_command ...
2025-03-21 22:59:51,129 - DEBUG - slack_bolt.App - Sending a request - url: https://slack.com/api/users.info, query_params: {}, body_params: {'user': 'U078M9TTM1B'}, files: {}, json_body: None, headers: {'Content-Type': 'application/x-www-form-urlencoded', 'Authorization': '(redacted)', 'User-Agent': 'Python/3.13.2 slackclient/3.35.0 Darwin/24.3.0'}
2025-03-21 22:59:51,129 - DEBUG - slack_bolt.App - Responding with status: 200 body: "" (0 millis)
2025-03-21 22:59:51,129 - DEBUG - slack_bolt.App - Sending a message (session id: 59a6a982-fb09-4001-9ffb-6afe3d77bc7f, message: {"envelope_id": "6f5873b5-788d-467f-ab43-d5f9f5ce6758"})
2025-03-21 22:59:51,130 - DEBUG - slack_bolt.App - Response time: 1 milliseconds
2025-03-21 22:59:51,130 - DEBUG - slack_bolt.App - Message processing completed (type: slash_commands, envelope_id: 6f5873b5-788d-467f-ab43-d5f9f5ce6758)
2025-03-21 22:59:51,640 - DEBUG - slack_bolt.App - Received the following response - status: 200, headers: {'date': 'Sat, 22 Mar 2025 05:59:51 GMT', 'server': 'Apache', 'vary': 'Accept-Encoding', 'x-slack-req-id': '44b880e4cb9d2f24788477cad7b929fa', 'x-content-type-options': 'nosniff', 'x-xss-protection': '0', 'pragma': 'no-cache', 'cache-control': 'private, no-cache, no-store, must-revalidate', 'expires': 'Sat, 26 Jul 1997 05:00:00 GMT', 'content-type': 'application/json; charset=utf-8', 'x-accepted-oauth-scopes': 'users:read', 'x-oauth-scopes': 'chat:write,commands,users:read,channels:read', 'access-control-expose-headers': 'x-slack-req-id, retry-after', 'access-control-allow-headers': 'slack-route, x-slack-version-ts, x-b3-traceid, x-b3-spanid, x-b3-parentspanid, x-b3-sampled, x-b3-flags', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'referrer-policy': 'no-referrer', 'x-slack-unique-id': 'Z95R16UVxktX7rDf5UKGAwAAECY', 'x-slack-backend': 'r', 'access-control-allow-origin': '*', 'content-length': '1767', 'via': '1.1 slack-prod.tinyspeck.com, envoy-www-iad-efiztypl,envoy-edge-iad-fqwrtlly', 'x-envoy-attempt-count': '1', 'x-envoy-upstream-service-time': '17', 'x-backend': 'main_normal main_canary_with_overflow main_control_with_overflow', 'x-server': 'slack-www-hhvm-main-iad-ertu', 'x-slack-shared-secret-outcome': 'no-match', 'x-edge-backend': 'envoy-www', 'x-geoname-id': 'notfound', 'x-slack-edge-shared-secret-outcome': 'no-match', 'connection': 'close'}, body: {"ok":true,"user":{"id":"U078M9TTM1B","team_id":"T078Q6V7GQ2","name":"evgeniy","deleted":false,"color":"9f69e7","real_name":"Evgeniy Zhdanov","tz":"America\/Los_Angeles","tz_label":"Pacific Daylight Time","tz_offset":-25200,"profile":{"title":"","phone":"","skype":"","real_name":"Evgeniy Zhdanov","real_name_normalized":"Evgeniy Zhdanov","display_name":"Evgeniy","display_name_normalized":"Evgeniy","fields":null,"status_text":"","status_emoji":"","status_emoji_display_info":[],"status_expiration":0,"avatar_hash":"95cc885ccff3","image_original":"https:\/\/avatars.slack-edge.com\/2024-06-18\/7296176080099_95cc885ccff3df0ca2ee_original.jpg","is_custom_image":true,"huddle_state":"default_unset","huddle_state_expiration_ts":0,"first_name":"Evgeniy","last_name":"Zhdanov","image_24":"https:\/\/avatars.slack-edge.com\/2024-06-18\/7296176080099_95cc885ccff3df0ca2ee_24.jpg","image_32":"https:\/\/avatars.slack-edge.com\/2024-06-18\/7296176080099_95cc885ccff3df0ca2ee_32.jpg","image_48":"https:\/\/avatars.slack-edge.com\/2024-06-18\/7296176080099_95cc885ccff3df0ca2ee_48.jpg","image_72":"https:\/\/avatars.slack-edge.com\/2024-06-18\/7296176080099_95cc885ccff3df0ca2ee_72.jpg","image_192":"https:\/\/avatars.slack-edge.com\/2024-06-18\/7296176080099_95cc885ccff3df0ca2ee_192.jpg","image_512":"https:\/\/avatars.slack-edge.com\/2024-06-18\/7296176080099_95cc885ccff3df0ca2ee_512.jpg","image_1024":"https:\/\/avatars.slack-edge.com\/2024-06-18\/7296176080099_95cc885ccff3df0ca2ee_1024.jpg","status_text_canonical":"","team":"T078Q6V7GQ2"},"is_admin":true,"is_owner":true,"is_primary_owner":true,"is_restricted":false,"is_ultra_restricted":false,"is_bot":false,"is_app_user":false,"updated":1742575581,"is_email_confirmed":true,"who_can_share_contact_card":"EVERYONE"}}
2025-03-21 22:59:51,641 - DEBUG - slack_bolt.App - Sending a request - url: https://slack.com/api/users.info, query_params: {}, body_params: {'user': 'огонь'}, files: {}, json_body: None, headers: {'Content-Type': 'application/x-www-form-urlencoded', 'Authorization': '(redacted)', 'User-Agent': 'Python/3.13.2 slackclient/3.35.0 Darwin/24.3.0'}
2025-03-21 22:59:52,017 - DEBUG - slack_bolt.App - Received the following response - status: 200, headers: {'date': 'Sat, 22 Mar 2025 05:59:52 GMT', 'server': 'Apache', 'vary': 'Accept-Encoding', 'x-slack-req-id': 'b3a0756ab793fff6a2505d20b4739fbc', 'x-content-type-options': 'nosniff', 'x-xss-protection': '0', 'pragma': 'no-cache', 'cache-control': 'private, no-cache, no-store, must-revalidate', 'expires': 'Sat, 26 Jul 1997 05:00:00 GMT', 'content-type': 'application/json; charset=utf-8', 'x-accepted-oauth-scopes': 'users:read', 'x-oauth-scopes': 'chat:write,commands,users:read,channels:read', 'access-control-expose-headers': 'x-slack-req-id, retry-after', 'access-control-allow-headers': 'slack-route, x-slack-version-ts, x-b3-traceid, x-b3-spanid, x-b3-parentspanid, x-b3-sampled, x-b3-flags', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'referrer-policy': 'no-referrer', 'x-slack-unique-id': 'Z95R2DlEh12uWOnjKHsHpQAAECE', 'x-slack-backend': 'r', 'access-control-allow-origin': '*', 'content-length': '37', 'via': '1.1 slack-prod.tinyspeck.com, envoy-www-iad-obrbezdb,envoy-edge-iad-weojxfkx', 'x-envoy-attempt-count': '1', 'x-envoy-upstream-service-time': '12', 'x-backend': 'main_normal main_canary_with_overflow main_control_with_overflow', 'x-server': 'slack-www-hhvm-main-iad-irqz', 'x-slack-shared-secret-outcome': 'no-match', 'x-edge-backend': 'envoy-www', 'x-geoname-id': 'notfound', 'x-slack-edge-shared-secret-outcome': 'no-match', 'connection': 'close'}, body: {"ok":false,"error":"user_not_found"}
2025-03-21 22:59:52,018 - ERROR - slack_bolt.App - Error: The request to the Slack API failed. (url: https://slack.com/api/users.info)
The server responded with: {'ok': False, 'error': 'user_not_found'}
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/slack_bolt/listener/thread_runner.py", line 120, in run_ack_function_asynchronously
    listener.run_ack_function(request=request, response=response)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/slack_bolt/listener/custom_listener.py", line 50, in run_ack_function
    return self.ack_function(
           ~~~~~~~~~~~~~~~~~^
        **build_required_kwargs(
        ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
        )
        ^
    )
    ^
  File "/Users/evgeniyzhdanov/Desktop/Cursor/Hloppy/hloppy_bot.py", line 146, in handle_hloppy_command
    target_info = app.client.users_info(user=target_user)
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/slack_sdk/web/client.py", line 5144, in users_info
    return self.api_call("users.info", http_verb="GET", params=kwargs)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/slack_sdk/web/base_client.py", line 169, in api_call
    return self._sync_send(api_url=api_url, req_args=req_args)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/slack_sdk/web/base_client.py", line 200, in _sync_send
    return self._urllib_api_call(
           ~~~~~~~~~~~~~~~~~~~~~^
        token=token,
        ^^^^^^^^^^^^
    ...<5 lines>...
        additional_headers=headers,  # type: ignore[arg-type]
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/slack_sdk/web/base_client.py", line 331, in _urllib_api_call
    ).validate()
      ~~~~~~~~^^
  File "/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/slack_sdk/web/slack_response.py", line 197, in validate
    raise e.SlackApiError(message=msg, response=self)
slack_sdk.errors.SlackApiError: The request to the Slack API failed. (url: https://slack.com/api/users.info)
The server responded with: {'ok': False, 'error': 'user_not_found'}
2025-03-21 22:59:52,026 - ERROR - slack_bolt.App - Error type: <class 'slack_sdk.errors.SlackApiError'>
2025-03-21 22:59:52,026 - ERROR - slack_bolt.App - Request body: {'token': 'OCYvnpsBAlFBFnFJO3I1mfF5', 'team_id': 'T078Q6V7GQ2', 'team_domain': 'plus8soft', 'channel_id': 'C07AN8HK2N8', 'channel_name': 'big3', 'user_id': 'U078M9TTM1B', 'user_name': 'evgeniy', 'command': '/hloppy', 'text': '@timur огонь', 'api_app_id': 'A08KGLV5JP2', 'is_enterprise_install': 'false', 'response_url': 'https://hooks.slack.com/commands/T078Q6V7GQ2/8644331693042/lmaxIoPOjZslgFdkV9CUlPtF', 'trigger_id': '8644331693106.7296233254818.e6f2f35993619f3e1440b15de14a1f07'}
2025-03-21 22:59:52,026 - ERROR - slack_bolt.App - Response data: {'ok': False, 'error': 'user_not_found'}
2025-03-21 22:59:52,026 - ERROR - slack_bolt.App - Response headers: {'date': 'Sat, 22 Mar 2025 05:59:52 GMT', 'server': 'Apache', 'vary': 'Accept-Encoding', 'x-slack-req-id': 'b3a0756ab793fff6a2505d20b4739fbc', 'x-content-type-options': 'nosniff', 'x-xss-protection': '0', 'pragma': 'no-cache', 'cache-control': 'private, no-cache, no-store, must-revalidate', 'expires': 'Sat, 26 Jul 1997 05:00:00 GMT', 'content-type': 'application/json; charset=utf-8', 'x-accepted-oauth-scopes': 'users:read', 'x-oauth-scopes': 'chat:write,commands,users:read,channels:read', 'access-control-expose-headers': 'x-slack-req-id, retry-after', 'access-control-allow-headers': 'slack-route, x-slack-version-ts, x-b3-traceid, x-b3-spanid, x-b3-parentspanid, x-b3-sampled, x-b3-flags', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'referrer-policy': 'no-referrer', 'x-slack-unique-id': 'Z95R2DlEh12uWOnjKHsHpQAAECE', 'x-slack-backend': 'r', 'access-control-allow-origin': '*', 'content-length': '37', 'via': '1.1 slack-prod.tinyspeck.com, envoy-www-iad-obrbezdb,envoy-edge-iad-weojxfkx', 'x-envoy-attempt-count': '1', 'x-envoy-upstream-service-time': '12', 'x-backend': 'main_normal main_canary_with_overflow main_control_with_overflow', 'x-server': 'slack-www-hhvm-main-iad-irqz', 'x-slack-shared-secret-outcome': 'no-match', 'x-edge-backend': 'envoy-www', 'x-geoname-id': 'notfound', 'x-slack-edge-shared-secret-outcome': 'no-match', 'connection': 'close'}
2025-03-21 22:59:52,026 - ERROR - slack_bolt.App - Response status: 200
